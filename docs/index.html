---
title: 'Assistente de Laboratório'
page_title: 'Home'
layout: 'default'
icon: 'fas fa-home'
language: 'pt-br'
order: 1
---

<p>
  Página desenvolvida para mostrar a possibilidade de aplicação do algoritmo SymTree para Regressão Simbólica com baixo custo computacional. Essa ferramenta pode ser utilizada como auxiliar de laboratórios didáticos em que são feitos experimentos de mensuração para verificar relações vistas em sala de aula. A tecnologia utilizada é a linguagem JavaScript e, portanto, executa o algoritmo no próprio navegador do usuário. Experimente!
</p>

<!--Como utilizar a ferramenta online-->
<div class="card border-primary" style="margin-top: 20px; margin-bottom: 20px">
  <h5 class="card-header">
    <a data-toggle="collapse" href="#how-to-body" aria-expanded="true" aria-controls="how-to-body" id="how-to-header" class="collapsed d-block">
      <i class="fa fa-chevron-down" style="float: right"></i>
      Como utilizar a ferramenta online?
    </a>
  </h5>
  <div id="how-to-body" class="collapse" aria-labelledby="how-to-header">
    <div class="card-body">
      <div class="container">
        <div class="row">
          <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h5><strong>1 - Digite os dados</strong></h5>
            <p>
              Os dados de entrada podem ser digitados ou carregados através de um arquivo .csv. Cada linha da entrada devem primeiro conter as variáveis do problema e, em seguida, a variável de medição: x1, x2, ...,y. Opcionalmente, a primeira linha pode conter os nomes das variáveis (clique na caixa correspondente para ativar essa opção);
            </p>
          </div>
          <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h5><strong>2 - Escolha e execute um algoritmo</strong></h5>
            <p>
              Escolha o algoritmo a ser executado. Os algoritmos por padrão apresentam configurações para uma boa performance em navegadores, mas é possível modificar os seus parâmetros clicando na engrenagem na área de <em>execução e resultados</em>;
            </p>
          </div>
          <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <h5><strong>3 - Analise o resultado</strong></h5>
            <p>
              Após finalizar o processamento, o site irá exibir os resultados da regressão simbólica, que podem ser manipulados. Para um melhor entendimento, a página <a href="{{ site.url }}{{ site.baseurl }}/study.html"">notas de estudo</a> fornece uma explicação da ideia da ferramenta desenvolvida.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--Entrada de dados-->
<div class="card border-secondary" style="margin-top: 20px; margin-bottom: 20px">
  <h5 class="card-header">
    <a>
      Entrada de dados
    </a>
  </h5>
  <div class="card-body">
    <p>
      Os dados podem ser digitados manualmente, ou você pode fazer o upload de um arquivo <strong>.csv</strong> contendo seus dados. Caso queira, a primeira linha pode ser usada para nomear as variáveis. No site há uma página mais elaborada sobre os <a href=".\input-examples.html">dados de entrada</a>, com exemplos para testar o algoritmo. O site manterá guardado o último conjunto de dados que foi carregado com êxito até o final da sessão.
    </p>
    <div class="container">
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
            <h5><strong>Entrada manual de dados</strong></h5>
            <textarea style="max-width: 100%; min-width:100%" class="form-control" rows="8" placeholder="Digite os dados aqui. Um ponto em cada linha, separados por vírgulas, espaços ou tabulações" id="my-manualinput"></textarea>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12">
            <h5><strong>Upload de arquivo local</strong></h5>
            <span class="btn btn-default btn-file">
                <input type="file" class="form-control-file" id="my-csvinput" accept=".csv"/>
            </span><hr>
        </div>
      </div>
    </div>
    <p class="text-center" style="margin-top:20px">
      <input type="checkbox" id="labeled" value="true">
      <label for="labeled">Usar a primeira linha da entrada como rótulo?</label>
    </p>
    <div class="container">
      <div class="row">
          <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
            <p>
              <button type="button" class="btn btn-secondary btn-block" onclick="performUpload('my-manualinput', 'manual');">Usar valores digitados</button>
            </p>
          </div>
          <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
            <p>
              <button type="button" class="btn btn-secondary btn-block" onclick="performUpload('my-csvinput', 'csv');">Usar arquivo enviado</button>
            </p>
          </div>
          <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12">
            <p>
              <button type="button" class="btn btn-secondary btn-block" onclick="get_example('my-manualinput', 'manual')">Escolhi um examplo</button>
            </p>
          </div>
      </div>
    </div>
  </div>
  <div class="card-footer" id="input-notification"></div>
</div>

<!--execução e resultados-->
<div class="card border-secondary" style="margin-top: 20px; margin-bottom: 20px">
  <h5 class="card-header">
    <a>
      Execução e resultados 
    </a>
    <a data-toggle="collapse" href="#configs-body" aria-expanded="true" aria-controls="configs-body" id="configs-header" class="collapsed d-block float-right"><i class="fas fa-cogs"></i> Opções</a>
    <div id="configs-body" class="collapse" aria-labelledby="configs-header">
      <hr>
      <div class="container">
        <div class="row">
          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <p>SymTree (Symbolic Tree)</p>
            <div class="form-row">
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="symtree-iteractions">Iterações</label>
                <select class="custom-select mr-sm-2" id="symtree-iteractions">
                  <option value="1">1</option>
                  <option value="2">2 (melhor performance)</option>
                  <option value="3">3</option>
                  <option value="4" selected>4  (padrão)</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="symtree-threshold">Threshold</label>
                <select class="custom-select mr-sm-2" id="symtree-threshold">
                  <option value="0.005">0.005</option>
                  <option value="0.05" selected>0.05 (padrão)</option>
                  <option value="0.10">0.10</option>
                  <option value="0.10">0.20</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="symtree-inv">Iteração de início da inversa</label>
                <select class="custom-select mr-sm-2" id="symtree-inv">
                  <option value="1">1</option>
                  <option value="2" selected>2 (padrão)</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="symtree-transf">Iteração de início da transformação</label>
                <select class="custom-select mr-sm-2" id="symtree-transf">
                  <option value="1">1</option>
                  <option value="2" selected>2 (padrão)</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="symtree-stopscore">Score de parada</label>
                <select class="custom-select mr-sm-2" id="symtree-stopscore">
                  <option value="0.75">0.75</option>
                  <option value="0.9">0.90</option>
                  <option value="0.99" selected>0.99 (padrão)</option>
                  <option value="1.0">Sem critério de parada</option>
                </select>
              </div>
            </div>
            <hr>
          </div>
          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <p>IT-LS (Interaction-Transformation Local Search)</p> 
            <div class="form-row">
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="itls-popsize">Tamanho da população</label>
                <select class="custom-select mr-sm-2" id="itls-popsize">
                  <option value="50">50 (melhor performance)</option>
                  <option value="100">100</option>
                  <option value="150" selected>150 (padrão)</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="itls-startsize">Tamanho inicial das expressões</label>
                <select class="custom-select mr-sm-2" id="itls-startsize">
                  <option value="1" selected>1 (padrão)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="itls-endsize">Crescimento permitido das expressões</label>
                <select class="custom-select mr-sm-2" id="itls-endsize">
                  <option value="0">Sem crescimento</option>
                  <option value="3" selected>3 (padrão)</option>
                  <option value="5">5</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="itls-expolim">Limite nos expoentes (na população inicial)</label>
                <select class="custom-select mr-sm-2" id="itls-expolim">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3" selected>3 (padrão)</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="itls-iteractions">Iterações</label>
                <select class="custom-select mr-sm-2" id="itls-iteractions">
                  <option value="10">10</option>
                  <option value="25">25</option>
                  <option value="50" selected>50 (padrão)</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="itls-stopscore">Score de parada</label>
                <select class="custom-select mr-sm-2" id="itls-stopscore">
                  <option value="0.75">0.75</option>
                  <option value="0.9">0.90</option>
                  <option value="0.995" selected>0.995 (padrão)</option>
                  <option value="1.0">Sem critério de parada</option>
                </select>
              </div>
            </div>
            <hr>
          </div>
          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> 
            <p>IT-ES (Interaction-Transformation Evolution Strategies)</p>
            <div class="form-row">
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="ites-popsize">Tamanho da população</label>
                <select class="custom-select mr-sm-2" id="ites-popsize">
                  <option value="50">50 (melhor performance)</option>
                  <option value="100">100</option>
                  <option value="150" selected>150 (padrão)</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="ites-startsize">Tamanho inicial das expressões</label>
                <select class="custom-select mr-sm-2" id="ites-startsize">
                  <option value="1" selected>1 (padrão)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="ites-endsize">Crescimento permitido das expressões</label>
                <select class="custom-select mr-sm-2" id="ites-endsize">
                  <option value="0">Sem crescimento</option>
                  <option value="3" selected>3 (padrão)</option>
                  <option value="5">5</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="ites-selecsize">Tamanho da seleção</label>
                <select class="custom-select mr-sm-2" id="ites-selecsize">
                  <option value="15">15</option>
                  <option value="25">25</option>
                  <option value="50" selected>50 (padrão)</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="ites-expolim">Limite nos expoentes</label>
                <select class="custom-select mr-sm-2" id="ites-expolim">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3" selected>3 (padrão)</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="ites-gens">Gerações</label>
                <select class="custom-select mr-sm-2" id="ites-gens">
                  <option value="15">15</option>
                  <option value="25">25</option>
                  <option value="50" selected>50 (padrão)</option>
                </select>
              </div>
              <div class="col-auto my-1">
                <label class="mr-sm-2" for="ites-stopscore">Score de parada</label>
                <select class="custom-select mr-sm-2" id="ites-stopscore">
                  <option value="0.75">0.75</option>
                  <option value="0.9">0.90</option>
                  <option value="0.995" selected>0.995 (padrão)</option>
                  <option value="1.0">Sem critério de parada</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </h5>
  <div class="card-body">
    <p>
      Com os dados carregados, basta escolher um dos algorithmos abaixo. Também é possível ajustar os parâmetros do algoritmo clicando na engrenagem acima (isso pode melhorar o tempo de execução, ao custo de realizar uma busca mais simples. O primeiro parâmetro é o que mais tem impacto no tempo de execução, e uma sugestão é indicada).
    </p>
    <div class="container">
      <div class="row">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <p>
            <button type="button" class="btn btn-secondary btn-block" onclick="performRegression('SymTree')">Algoritmo SymTree (Symbolic Tree)</button>
          </p>
        </div>
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <p>
            <button type="button" class="btn btn-secondary btn-block" onclick="performRegression('ITLS')">Algoritmo IT-LS (Interaction-Transformation Local Search)</button>
          </p>            
        </div>
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <p>
            <button type="button" class="btn btn-secondary btn-block" onclick="performRegression('ITES')">Algoritmo IT-ES (Interaction-Transformation Evolution Strategies)</button>
          </p>              
        </div>
      </div>
    </div>

    <div id="results-div" style="display: none;">
      <h5>Resultado:</h5>
      <div id="results-log"><pre></pre></div>
      <p>Obtido uma função simbólica, podemos entender um pouco mais sobre ela inspecionando o efeito que cada termo tem no comportamento final. Verifique o comportamento dos termos (ou combinações deles) em relação a variável-alvo ou em relação a uma das variáveis de entrada, selecionando aqueles que gostaria de incluir na expressão final.</p>

      <p>
        Primeiro, selecione os termos para compor a nova expressão. Após isso, temos duas opções de gráficos: <em>i)</em> plotar o valor predito versus o valor real - quanto mais próximo de uma reta o gráfico estiver, melhor sua capacidade de predizer valores; <em>ii)</em> plotar o valor predito versus uma variável - isso permite ver como o comportamento do gráfico muda quando todas as variáveis são fixadas, e apenas uma é variada (esse gráfico será feito no intervalo dos valores passados).
      </p>

      <div class='row'>
        <div class='col-xl-4 col-lg-4 col-md-12 col-sm-12 col-xs-12' id='func-composer'>
          <div id="graphics-control"></div>
          <button type='button' class='btn btn-secondary btn-lg btn-block' onclick='update_plot()'>Plotar grafico T <i>x</i> Y</button><br>
          <button type='button' class='btn btn-secondary btn-lg btn-block' onclick='update_variable_plot()'>Plotar grafico T <i>x</i> X</button>
        </div>
        <div class='col-xl-8 col-lg-8 col-md-12 col-sm-12 col-xs-12'>
          <div  id='func-ploter' style="width: 100%; height: calc(100%-50px); min-height: 500px;"></div>
          <p id='func-latex'></p>
        </div>
      </div><br>
    </div>
  </div>
  <div class="card-footer" id="results-notification"></div>
</div>

<!--Os resultados obtidos foram satisfatórios?-->
<div class="card border-primary" style="margin-top: 20px; margin-bottom: 20px">
    <h5 class="card-header">
      <a data-toggle="collapse" href="#quality-body" aria-expanded="true" aria-controls="quality-body" id="quality-header" class="d-block">
        <i class="fa fa-chevron-down" style="float: right"></i>
        Os resultados obtidos foram satisfatórios?
      </a>
    </h5>
    <div id="quality-body" class="show collapse" aria-labelledby="quality-header">
      <div class="card-body">
        <p>
          A regressão simbólica é uma tarefa difícil, por ter uma quantidade muito grande de parâmetros para ajustar - desde os coeficientes livres até a própria forma da função. No nosso caso, pode ser que a equação real não possa ser representada, os dados sejam muito ruidosos ou a quantidade de dados necessária seja maior do que a utilizada. Ainda assim, o algoritmo consegue ser capaz de apresentar bons resultados em diversos cenários. 
        </p>
        <p>
          Para qualificar as expressões criadas pelos algoritmos, usamos o <em>score</em>. O score é uma classificação para a expressão, de acordo com o quão bem esta expressão se ajusta ao DATASET de entrada, e varia de 0 a 1. O score é calculado por:
        </p>
        <p>
          $$\small{ score = \frac{1}{(1 + MAE)} }$$
        </p>
        <p>
            Onde o MAE (desvio médio absoluto) é igual ao somatório das diferenças entre os valores da variável dependente yi e os valores calculados pela expressão para Xi: 
        </p>
        <p>
          $$\small{ Mean Absolute Error\ (MAE)  = \sum_{i=1}^{n}\frac{|y_{i} - \widehat{f}(X_{i})|}{n} }$$
        </p>
        <p>
          Onde n é o tamanho da base de dados utilizada.
        </p>
        <div class="container">
          <div class="row">
            <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <h5><strong>Algoritmo SymTree</strong></h5>
                <p>
                  Este algoritmo inicia sua busca a partir de uma solução representando uma regressão linear. A cada iteração ele aplica as operações de interação entre as variáveis e transformação, gerando funções incrementalmente mais complexas. Mais detalhes podem ser vistos no seu <a href="https://folivetti.github.io/files/InfoScienceITSR.pdf">artigo original</a>.
                </p>
            </div>
            <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <h5><strong>Algoritmo IT-LS</strong></h5>
                <p>
                  O algoritmo funciona criando uma população inicial de expressões aleatórias e selecionando a melhor dentre elas. Após isso, executa uma busca local na equação, mudando ou as funções não-lineares ou os expoentes da equação, repetindo o processo até que não exista uma modificação que melhore ainda mais o score da equação. Esse algoritmo é executado até no máximo 50 iterações.
                </p>
            </div>
            <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <h5><strong>Algoritmo IT-ES</strong></h5>
                <p>
                  O algoritmo funciona criando uma população de expressões aleatórias, e então executa um algoritmo de Estratégia Evolutiva \(\small ES-(\mu, \lambda)\). Esse algoritmo foi executado apenas com mutação, \(\small \mu=150\), \(\small \lambda=45\) e 150 iterações. Uma versão mais elaborada desse algoritmo foi posteriormente formalizada, e <a href="https://arxiv.org/pdf/1902.03983.pdf">o artigo apresentando a nova proposta do algoritmo pode ser encontrado aqui</a>.
                </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


<!--Sobre-->
<div class="card border-primary" style="margin-top: 20px; margin-bottom: 20px">
  <h5 class="card-header">
    <a data-toggle="collapse" href="#about-body" aria-expanded="true" aria-controls="about-body" id="about-header" class="collapsed d-block">
      <i class="fa fa-chevron-down" style="float: right"></i>
      Sobre
    </a>
  </h5>
  <div id="about-body" class="collapse" aria-labelledby="about-header">
    <div class="card-body">
      <p>
        A Regressão Simbólica tem por objetivo encontrar a função geradora de uma base de dados amostrais. Ela difere de outros tipos de regressão pois não está restrito a uma forma fixa como em métodos de regressão linear, polinomial e redes neurais. Normalmente, a Regressão Simbólica é feita através de Algoritmos Evolutivos (ex.: Programação Genética), mas esses costumam ser computacionalmente custosos, mesmo em bases de dados de baixa dimensão.
      </p>
      <p>
        Este projeto tem como objetivo mostrar o potencial do algoritmo SymTree para dados de baixa dimensão e gerados por funções conhecidas da Física, Matemática e Engenharia.
      </p>
      <p>
        Esse projeto foi desenvolvido por Guilherme Aldeia como parte de sua iniciação científica orientado pelo prof. Fabricio Olivetti de França na Universidade Federal do ABC.
      </p>
    </div>
  </div>
</div>
    
<!-- scripts dos algoritmos de regressão simbólica-->
<script src="{{ site.url }}{{ site.baseurl }}{{ site.js_folder }}LoadFile.js"></script>
<script src="{{ site.url }}{{ site.baseurl }}{{ site.js_folder }}SymbolicRegression.js"></script>

<script src="{{ site.url }}{{ site.baseurl }}{{ site.js_folder }}main.js"></script>

<script src="{{ site.url }}{{ site.baseurl }}{{ site.js_folder }}math.js"></script>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
